var MultiTableER;(()=>{"use strict";var e={677:(e,t,a)=>{a.d(t,{H:()=>n});class i{static _THE_INNERHTML_;static count_group;static __VAR_DATETYPE_UNDEFINED__=0;static __VAR_DATETYPE_JSON__=1;static __VAR_DATETYPE_JSON_STRING__=2;static __VAR_DATETYPE_ARRAY__=3;static __VAR_DATETYPE_STRING__=4;static __VAR_DATETYPE_NUMBER__=5;static __VAR_DATETYPE_BOOLEAN__=6;static __VAR_DATETYPE_STRING_BOOLEAN__=7;constructor(){i.count_group=0,i.InitBOX()}static debug(e=""){console.group("***********DEBUGER ANS [BEGIN]***********"),console.log(e),console.groupEnd(),console.log("***********DEBUGER ANS [END]***********")}returnDetectDataType(e=null){switch(i.DetectDataType(e)){case i.__VAR_DATETYPE_UNDEFINED__:return"UNDEFINED";case i.__VAR_DATETYPE_JSON__:return"JSON";case i.__VAR_DATETYPE_JSON_STRING__:return"JSON_STRING";case i.__VAR_DATETYPE_ARRAY__:return"ARRAY";case i.__VAR_DATETYPE_STRING__:return"STRING";case i.__VAR_DATETYPE_NUMBER__:return"NUMBER";case i.__VAR_DATETYPE_BOOLEAN__:return"BOOLEAN";case i.__VAR_DATETYPE_STRING_BOOLEAN__:return"STRING_BOOLEAN"}}static DetectDataType(e=null){if("object"==typeof e&&null!==e&&!Array.isArray(e))return i.__VAR_DATETYPE_JSON__;if(Array.isArray(e))return i.__VAR_DATETYPE_ARRAY__;if("string"!=typeof e)return"number"==typeof e?i.__VAR_DATETYPE_NUMBER__:"boolean"==typeof e?i.__VAR_DATETYPE_BOOLEAN__:i.__VAR_DATETYPE_UNDEFINED__;try{return JSON.parse(e),i.__VAR_DATETYPE_JSON_STRING__}catch(t){return"true"===e.toLocaleLowerCase()||"false"===e.toLocaleLowerCase()||"yes"===e.toLocaleLowerCase()||"no"===e.toLocaleLowerCase()||"si"===e.toLocaleLowerCase()?i.__VAR_DATETYPE_STRING_BOOLEAN__:i.__VAR_DATETYPE_STRING__}}static InitBOX(){if(i._THE_INNERHTML_=document.createElement("div"),i._THE_INNERHTML_.id="ans_innerhtml_bug",!document?.querySelector("#ANSlogbox")){const e=document.createElement("div");e.id="ANSlogbox",e.className="log";const t=document.createElement("div");t.id="show_hidden";const a=document.createElement("div");a.id="maximize_icon",t.addEventListener("click",(function(e){const t=e.currentTarget.parentNode;t&&t instanceof HTMLElement&&(t.classList.toggle("open"),Array.from(t.classList).includes("open")||(t.classList.remove("maximize"),t.style.cssText=""))})),a.addEventListener("click",(function(e){const t=document.getElementById("sandbox-host"),a=e.currentTarget.parentNode;if(a&&a instanceof HTMLElement&&a.classList.toggle("maximize"),t){const e=t.clientWidth,i=t.clientHeight;Array.from(a.classList).includes("maximize")?(a.style.width=e-30+"px",a.style.height=i-30+"px"):a.style.cssText=""}}));const i=document.createElement("div");i.className="container-message",i.id="ANS_console_content",i.appendChild(document.createTextNode("")),e.appendChild(a),e.appendChild(t),e.appendChild(i),document&&document.body.appendChild(e)}}static GetDOM(){return i._THE_INNERHTML_.children}static PrintDom(e){if(document&&document?.querySelector("#ANSlogbox")){const t=document?.querySelector("#ANS_console_content");t&&t.appendChild(e)}}static returnSetectFormat(e="",t=""){const a=document.createElement("div");a.className="div_content_toogle",a.id="div_content_toogle";const n=document.createElement("INPUT");n.setAttribute("type","checkbox"),n.id="toggle",n.className="toggleCheckbox",a.appendChild(n);const s=document.createElement("LABEL");s.setAttribute("for","toggle"),s.className="toggleContainer";const o=document.createElement("div");return s.appendChild(o.appendChild(i.returnSpan(e,null,"div"))),s.appendChild(o.appendChild(i.returnSpan(t,null,"div"))),a.appendChild(s),a.addEventListener("click",(e=>{const t=e.currentTarget.parentNode;t.querySelector(".toggleCheckbox").checked?t.className="open":t.className="close"})),a}static displayFormattedJson(e){try{const t=JSON.parse(e);return JSON.stringify(t,null,2)}catch(t){return e}}static returnSpan(e,t=null,a="span"){const i=document.createElement(a);return null!==t&&(i.className=t),i.appendChild(document.createTextNode(e)),i}static displayFormatTable(e){const t=document.createElement("table");t.className="table";const a=document.createElement("tr");return Object.keys(e).forEach((t=>{const n=document.createElement("td"),s=document.createElement("span");s.className="value";const o=document.createElement("span");o.className="key",o.appendChild(document.createTextNode(t)),n.appendChild(o),"object"!=typeof e[t]||null===e[t]||Array.isArray(e[t])?(s.appendChild(document.createTextNode(e[t])),n.appendChild(s)):n.appendChild(i.displayFormatTable(e[t])),a.appendChild(n)})),t.appendChild(a),t}static returnText(e,t=!1,a=""){if(t){const t=document.createElement("div");t.className="span "+a+" "+(0==i.count_group?"full-display":"");for(let e=0;e<i.count_group;e++)t.appendChild(i.returnSpan(" "));if(i.DetectDataType(e)==i.__VAR_DATETYPE_JSON__||i.DetectDataType(e)==i.__VAR_DATETYPE_JSON_STRING__){t.className=t.className+" formatjson";const a=document.createElement("span");a.appendChild(i.returnSetectFormat("TABLE","JSON")),a.appendChild(i.returnSpan(i.displayFormattedJson(e),"content_string_formater","div"));const n=document.createElement("div");n.className="content_table_formater",i.DetectDataType(e)==i.__VAR_DATETYPE_JSON_STRING__?n.appendChild(i.displayFormatTable(JSON.parse(e))):n.appendChild(i.displayFormatTable(e)),a.appendChild(n),t.appendChild(a)}else t.appendChild(i.returnSpan(e));return t}return document.createTextNode(e)}Clear(){if(document&&document?.querySelector("#ANSlogbox")){const e=document?.querySelector("#ANS_console_content");if(e)for(;e.firstChild;)e.removeChild(e.firstChild)}}Group(e=""){const t=document.createElement("H1");""!==e&&i.DetectDataType(e)===i.__VAR_DATETYPE_STRING__?t.appendChild(document.createTextNode(e)):t.appendChild(document.createTextNode("EL TÍTULO DEBE SER UNA CADENA NO UN OBJETO")),i.PrintDom(t),i.count_group++}GroupEnd(){i.count_group--}Log(e){i.PrintDom(i.returnText(e,!0,"log"))}Warn(e){i.PrintDom(i.returnText(e,!0,"warning"))}Info(e){i.PrintDom(i.returnText(e,!0,"information"))}Error(e){i.PrintDom(i.returnText(e,!0,"error"))}}const n=new i},925:(e,t,a)=>{a.d(t,{w:()=>i});class i{__JSON__;constructor(){this.__JSON__=null}static GetDataStructure(e){if(e){let t="";t+="ENTRÓ[";const a=e.map((e=>{const a=Object.keys(e.source.roles)[0];return t+=e.source.displayName+"["+a+"],",{Title:e.source.displayName,Positions:Object.values(e.source.rolesIndex[a][0]),RowsValues:e.values}}));return a.sort(((e,t)=>e.Positions-t.Positions)),t+=JSON.stringify(a),a.map((e=>({Title:e.Title,RowsValues:e.RowsValues})))}return"null"}static ReturnJSON(e){return{Rows:i.GetDataStructure(e.categories),Columns:i.GetDataStructure(e.values)}}}},946:(e,t,a)=>{a.d(t,{S:()=>l});var i=a(674),n=i.z.Tn,s=i.z.Kx;class o extends n{defaultColor=new i.z.sk({name:"defaultColor",displayName:"Default color",value:{value:""}});showAllDataPoints=new i.z.jF({name:"showAllDataPoints",displayName:"Show all",value:!0});fill=new i.z.sk({name:"fill",displayName:"Fill",value:{value:""}});fillRule=new i.z.sk({name:"fillRule",displayName:"Color saturation",value:{value:""}});fontSize=new i.z.iB({name:"fontSize",displayName:"Text Size",value:12});name="dataPoint";displayName="Data colors";slices=[this.defaultColor,this.showAllDataPoints,this.fill,this.fillRule,this.fontSize]}class l extends s{dataPointCard=new o;cards=[this.dataPointCard]}},283:(e,t,a)=>{a.d(t,{b:()=>l});var i=a(674),n=a(677),s=a(925),o=a(946);class l{target;formattingSettings;formattingSettingsService;constructor(e){this.formattingSettingsService=new i.O,this.target=e.element,document&&n.H.Warn("-Guillermo Rocha-")}update(e){this.formattingSettings=this.formattingSettingsService.populateFormattingSettingsModel(o.S,e.dataViews[0]),document&&(n.H.Clear(),n.H.Group("type:"+n.H.returnDetectDataType(e.dataViews[0])),n.H.Warn(JSON.stringify(s.w.ReturnJSON(e.dataViews[0].categorical))),n.H.GroupEnd())}getFormattingModel(){return this.formattingSettingsService.buildFormattingModel(this.formattingSettings)}}},754:(e,t,a)=>{a.d(t,{Kx:()=>o,St:()=>l,Tn:()=>r,iB:()=>p,jF:()=>d,sk:()=>u});var i=a(639);class n{}class s extends n{}class o{}class l extends n{}class r extends s{}class c extends n{constructor(e){super(),Object.assign(this,e)}getFormattingSlice(e,t){const a=this.type,i=this.name,n={displayName:t&&this.displayNameKey?t.getDisplayName(this.displayNameKey):this.displayName,description:t&&this.descriptionKey?t.getDisplayName(this.descriptionKey):this.description,uid:e+"-"+i};return Object.assign(Object.assign({},n),{control:{type:a,properties:this.getFormattingComponent(e,t)}})}getFormattingComponent(e,t){return{descriptor:i.y(e,this),value:this.value}}getRevertToDefaultDescriptor(e){return[{objectName:e,propertyName:this.name}]}setPropertiesValues(e,t){var a;let n=null===(a=null==e?void 0:e[t])||void 0===a?void 0:a[this.name];this.value=i.D(this,n,this.value)}}class d extends c{constructor(e){super(e),this.type="ToggleSwitch"}}class u extends c{constructor(e){super(e),this.type="ColorPicker"}getFormattingComponent(e){return Object.assign(Object.assign({},super.getFormattingComponent(e)),{defaultColor:this.defaultColor,isNoFillItemSupported:this.isNoFillItemSupported})}}class p extends c{constructor(e){super(e),this.type="NumUpDown"}getFormattingComponent(e){return Object.assign(Object.assign({},super.getFormattingComponent(e)),{options:this.options})}}},667:(e,t,a)=>{a.d(t,{A:()=>n});var i=a(754);const n=class{constructor(e){this.localizationManager=e}populateFormattingSettingsModel(e,t){var a,n;let s=new e,o=null===(a=null==t?void 0:t.metadata)||void 0===a?void 0:a.objects;return o&&(null===(n=s.cards)||void 0===n||n.forEach((e=>{var t;e instanceof i.St&&(null===(t=e.topLevelSlice)||void 0===t||t.setPropertiesValues(o,e.name)),(e instanceof i.Tn?[e]:e.groups).forEach((t=>{var a,i,n,s;null===(a=t.topLevelSlice)||void 0===a||a.setPropertiesValues(o,e.name),null===(i=null==t?void 0:t.slices)||void 0===i||i.forEach((t=>{null==t||t.setPropertiesValues(o,e.name)})),null===(s=null===(n=null==t?void 0:t.container)||void 0===n?void 0:n.containerItems)||void 0===s||s.forEach((t=>{var a;null===(a=null==t?void 0:t.slices)||void 0===a||a.forEach((t=>{null==t||t.setPropertiesValues(o,e.name)}))}))}))}))),s}buildFormattingModel(e){let t={cards:[]};return e.cards.filter((({visible:e=!0})=>e)).forEach((e=>{var a;let n={displayName:this.localizationManager&&e.displayNameKey?this.localizationManager.getDisplayName(e.displayNameKey):e.displayName,description:this.localizationManager&&e.descriptionKey?this.localizationManager.getDisplayName(e.descriptionKey):e.description,groups:[],uid:e.name+"-card",analyticsPane:e.analyticsPane};const s=e.name;if(e.topLevelSlice){let t=e.topLevelSlice.getFormattingSlice(s,this.localizationManager);t.suppressDisplayName=!0,n.topLevelToggle=t}null===(a=e.onPreProcess)||void 0===a||a.call(e);const o=e instanceof i.Tn;(o?[e].filter((({visible:e=!0})=>e)):e.groups.filter((({visible:e=!0})=>e))).forEach((e=>{const t=e.name+"-group",a={displayName:o?void 0:this.localizationManager&&e.displayNameKey?this.localizationManager.getDisplayName(e.displayNameKey):e.displayName,description:o?void 0:this.localizationManager&&e.descriptionKey?this.localizationManager.getDisplayName(e.descriptionKey):e.description,slices:[],uid:t,collapsible:e.collapsible,delaySaveSlices:e.delaySaveSlices,disabled:e.disabled,disabledReason:e.disabledReason};n.groups.push(a);const i={};if(e.container){const n=e.container,o=t+"-container",l={displayName:this.localizationManager&&n.displayNameKey?this.localizationManager.getDisplayName(n.displayNameKey):n.displayName,description:this.localizationManager&&n.descriptionKey?this.localizationManager.getDisplayName(n.descriptionKey):n.description,containerItems:[],uid:o};n.containerItems.forEach((e=>{const t=e.displayNameKey?e.displayNameKey:e.displayName,a=o+t;let n={displayName:this.localizationManager&&e.displayNameKey?this.localizationManager.getDisplayName(e.displayNameKey):e.displayName,slices:[],uid:a};this.buildFormattingSlices({slices:e.slices,objectName:s,sliceNames:i,formattingSlices:n.slices}),l.containerItems.push(n)})),a.container=l}if(e.slices){if(e.topLevelSlice){let t=e.topLevelSlice.getFormattingSlice(s,this.localizationManager);t.suppressDisplayName=!0,(null==a.displayName?n:a).topLevelToggle=t}this.buildFormattingSlices({slices:e.slices,objectName:s,sliceNames:i,formattingSlices:a.slices})}})),n.revertToDefaultDescriptors=this.getRevertToDefaultDescriptor(e),t.cards.push(n)})),t}buildFormattingSlices({slices:e,objectName:t,sliceNames:a,formattingSlices:i}){null==e||e.filter((({visible:e=!0})=>e)).forEach((e=>{let n=null==e?void 0:e.getFormattingSlice(t,this.localizationManager);n&&(void 0===a[e.name]?a[e.name]=0:(a[e.name]++,n.uid=`${n.uid}-${a[e.name]}`),i.push(n))}))}getRevertToDefaultDescriptor(e){var t;const a={};let n,s=[],o=[];return e instanceof i.St&&e.topLevelSlice&&s.push(...null===(t=e.topLevelSlice)||void 0===t?void 0:t.getRevertToDefaultDescriptor(e.name)),(e instanceof i.Tn?[e].filter((({visible:e=!0})=>e)):e.groups.filter((({visible:e=!0})=>e))).forEach((t=>{var i,l;n=this.getSlicesRevertToDefaultDescriptor(e.name,t.slices,a,t.topLevelSlice),null===(l=null===(i=t.container)||void 0===i?void 0:i.containerItems)||void 0===l||l.forEach((t=>{o=o.concat(this.getSlicesRevertToDefaultDescriptor(e.name,t.slices,a))})),s.push(...n.concat(o))})),s}getSlicesRevertToDefaultDescriptor(e,t,a,i){let n=[];return i&&(a[i.name]=!0,n=n.concat(i.getRevertToDefaultDescriptor(e))),null==t||t.forEach((t=>{t&&!a[t.name]&&(a[t.name]=!0,n=n.concat(t.getRevertToDefaultDescriptor(e)))})),n}}},674:(e,t,a)=>{a.d(t,{O:()=>n.A,z:()=>i});var i=a(754),n=a(667)},639:(e,t,a)=>{function i(e,t){return{objectName:e,propertyName:t.name,selector:t.selector,altConstantValueSelector:t.altConstantSelector,instanceKind:t.instanceKind}}function n(e,t,a){return null==t||"object"==typeof t&&!t.solid?a:t.solid?{value:null==t?void 0:t.solid.color}:(null==e?void 0:e.items)?e.items.find((e=>e.value==t)):t}a.d(t,{D:()=>n,y:()=>i})}},t={};function a(i){var n=t[i];if(void 0!==n)return n.exports;var s=t[i]={exports:{}};return e[i](s,s.exports,a),s.exports}a.d=(e,t)=>{for(var i in t)a.o(t,i)&&!a.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i={};(()=>{a.r(i),a.d(i,{default:()=>s});var e=a(283),t=window.powerbi,n={name:"MultiTableER",displayName:"MultiTableER",class:"Visual",apiVersion:"5.3.0",create:t=>{if(e.b)return new e.b(t);throw"Visual instance not found"},createModalDialog:(e,t,a)=>{const i=globalThis.dialogRegistry;e in i&&new i[e](t,a)},custom:!0};void 0!==t&&(t.visuals=t.visuals||{},t.visuals.plugins=t.visuals.plugins||{},t.visuals.plugins.MultiTableER=n);const s=n})(),MultiTableER=i})();