var tableDataAndGraph;(()=>{"use strict";var e={583:(e,t,a)=>{a.d(t,{w:()=>r});class r{constructor(){}static get_data_cel(){return null}static return_JSON_structure(){return{account:{value:"",position:0},categories:{value:"",position:0},group_account_name:{value:"",position:0},account_name:{value:"",position:0},PreviousYear:{value:"",position:0},Budget:{value:"",position:0},CurrentYear:{value:"",position:0},difDollar:{value:"",position:0},difPercentage:{value:"",position:0},current_date:null}}static return_JSON_simple_structure(){return{categories:"",PreviousYear:0,Budget:0,CurrentYear:0,difDollar:0,difPercentage:0}}}},946:(e,t,a)=>{a.d(t,{C:()=>i,S:()=>u});var r=a(674),l=r.z.Zp,n=r.z.Kx;class o extends l{BackGroundColor=new r.z.sk({name:"BackGroundColor",displayName:"Background Color",value:{value:"#FFFFFF"}});BackGroundColorAccount=new r.z.sk({name:"BackGroundColorAccount",displayName:"Background Color Type Account",value:{value:"#FFFFFF"}});BackGroundColorHeaders=new r.z.sk({name:"BackGroundColorHeaders",displayName:"Background Color Headers",value:{value:"#FFFFFF"}});BackGroundColorHeadersColor=new r.z.sk({name:"BackGroundColorHeadersColor",displayName:"Text Color Headers",value:{value:"#FFFFFF"}});LabelExpenses=new r.z.ks({placeholder:"Label Expenses",name:"LabelExpenses",displayName:"Label Expenses",value:"Label Expense"});LabelIncome=new r.z.ks({placeholder:"Label Income",name:"LabelIncome",displayName:"Label Income",value:"Label Income"});LabelTotalExpenses=new r.z.ks({placeholder:"Label Total Expenses",name:"LabelTotalExpenses",displayName:"Label Total Expenses",value:"Label Expense"});LabelTotalIncome=new r.z.ks({placeholder:"Label Total Income",name:"LabelTotalIncome",displayName:"Label Total Income",value:"Label Total Income"});LabelTotalProfit=new r.z.ks({placeholder:"Label Total Profit",name:"LabelTotalProfit",displayName:"Label Total Profit",value:"Label Total Profit"});LabelRevenues=new r.z.ks({placeholder:"Label NON-Operatin Revenues",name:"LabelRevenues",displayName:"Label NON-Operatin Revenues",value:"Label NON-Operatin Revenues"});LabelTotalRevenues=new r.z.ks({placeholder:"Label Total NON-Operatin Revenues",name:"LabelTotalRevenues",displayName:"Label Total NON-Operatin Revenues",value:"Label Total NON-Operatin Revenues"});LabelTotalNetResultOperation=new r.z.ks({placeholder:"Label Total Net Result Operation",name:"LabelTotalNetResultOperation",displayName:"Label Total Net Result Operation",value:"Label Total Net Result Operation"});DecimalPlace=new r.z.iB({name:"DecimalPlace",displayName:"Decimal Place",value:2,options:{minValue:{type:0,value:0},maxValue:{type:1,value:8}}});name="format_table";displayName="Format Table";slices=[this.LabelIncome,this.LabelTotalIncome,this.LabelExpenses,this.LabelTotalExpenses,this.BackGroundColorHeaders,this.BackGroundColorHeadersColor,this.BackGroundColor,this.DecimalPlace,this.BackGroundColorAccount,this.LabelTotalProfit,this.LabelRevenues,this.LabelTotalRevenues,this.LabelTotalNetResultOperation]}class u extends n{dataPointCard=new o;cards=[this.dataPointCard]}class i{INCOME;EXPENSES;PROFIT;REVENUES;NETRESULTOPERATION;ValueDecimalPlaces;BackGroundColor;BackGroundColorAccount;BackGroundColorHeaders;BackGroundColorHeadersColor;constructor(e=null,t=null,a=null,r=null,l=null,n=3,o="#FFFFFF",u="#FFFFFF",i="#FFFFFF",s="#FFFFFF"){this.INCOME=e,this.EXPENSES=t,this.PROFIT=a,this.REVENUES=r,this.NETRESULTOPERATION=l,this.ValueDecimalPlaces=n,this.BackGroundColor=o,this.BackGroundColorAccount=u,this.BackGroundColorHeaders=i,this.BackGroundColorHeadersColor=s}getSettings(e){return{INCOME:{Label:e.dataPointCard.LabelIncome.value,LabelTotal:e.dataPointCard.LabelTotalIncome.value},EXPENSES:{Label:e.dataPointCard.LabelExpenses.value,LabelTotal:e.dataPointCard.LabelTotalExpenses.value},PROFIT:{Label:null,LabelTotal:e.dataPointCard.LabelTotalProfit.value},REVENUES:{Label:e.dataPointCard.LabelRevenues.value,LabelTotal:e.dataPointCard.LabelTotalRevenues.value},NETRESULTOPERATION:{Label:e.dataPointCard.LabelTotalNetResultOperation.value,LabelTotal:e.dataPointCard.LabelTotalNetResultOperation.value},ValueDecimalPlaces:e.dataPointCard.DecimalPlace.value,BackGroundColor:e.dataPointCard.BackGroundColor.value.value,BackGroundColorAccount:e.dataPointCard.BackGroundColorAccount.value.value,BackGroundColorHeaders:e.dataPointCard.BackGroundColorHeaders.value.value,BackGroundColorHeadersColor:e.dataPointCard.BackGroundColorHeadersColor.value.value}}}},283:(e,t,a)=>{a.d(t,{b:()=>o});var r=a(583),l=a(674),n=a(946);class o{static target;updateCount;textNode;AllColumnNames;executeUpdate;table;formattingSettings;formattingSettingsService;dataView;static _id_event_click_global_="";static GrandTotal={INCOME:r.w.return_JSON_structure(),EXPENSES:r.w.return_JSON_structure(),PROFIT:r.w.return_JSON_structure(),REVENUES:r.w.return_JSON_structure(),NETRESULTOPERATION:r.w.return_JSON_structure(),ITDA_VALUE:r.w.return_JSON_structure(),EBITDA_VALUE:r.w.return_JSON_structure(),EBITDA_PERCENTAGE:r.w.return_JSON_structure()};static settings_obj;constructor(e){if(this.formattingSettingsService=new l.O,o.target=e.element,this.executeUpdate=!1,document){const e=document.createElement("div");e.className="TblContainerER",e.setAttribute("id","TblContainerER"),o.target.appendChild(e)}}static getCurrentLine(){const e=new Error,t=(e.stack?.split("\n")||[])[2].match(/:(\d+):\d+/);return t?parseInt(t[1],10):-1}static LogBOX(e=null,t="error"){let a=document.getElementById("logbox");if(a)document.getElementById("allcontent").innerHTML+='<div class="container-message '+t+'"><textarea style="display:block;width_100%; height:150px">'+e+"</textarea></div>";else{const r=document.createElement("div"),l=document.createElement("div");l.id="allcontent",r.id="show_hidden",a=document.createElement("div"),a.className="log",a.id="logbox",l.innerHTML='<div class="container-message '+t+'"><textarea style="display:block;width_100%; height:150px">'+e+"</textarea></div>",a.appendChild(r),a.appendChild(l),o.target.appendChild(a),o.agregarEventoClick()}null==e&&$(".container-message").length&&$(".container-message").remove()}static ReturnCell(e,t,a="",r=null){const l=document.createElement(e);return l.innerHTML=t,""!=a&&(l.className=a),null!==r&&l.setAttribute("colspan",r.toString()),l}static checkValue(e,t=!1,a=""){return null==e||null==e?a:t?Number(e):e}static returnDate(e){return`${e.getDate().toString()}-${(e.getMonth()+1).toString()}-${e.getFullYear()}`}static ReplaceYTD(e,t,a){return e.replace("[CURRENT YEAR]",a).replace("[LAST YEAR]",t).replace(/\s+/g,"<br>")}onlyUnique(e,t,a){return a.indexOf(e)===t}static getRowValuesJson(e,t){return{account:e[t.account.position],categories:e[t.categories.position],group_account_name:e[t.group_account_name.position],account_name:e[t.account_name.position],PreviousYear:Number(e[t.PreviousYear.position]),Budget:Number(e[t.Budget.position]),CurrentYear:Number(e[t.CurrentYear.position]),difDollar:Number(e[t.difDollar.position]),difPercentage:Number(e[t.difPercentage.position])}}returnDB_Json(e){const t={TITLE_COLUMNS:{VALUES:[r.w.return_JSON_structure()]},VALUES:[],INCOME:{VALUES:[]},EXPENSES:{VALUES:[]},PROFIT:{VALUES:[]},REVENUES:{VALUES:[]},NETRESULTOPERATION:{VALUES:[]},CURRENT_YTD:"",LAST_YTD:""};return e.columns.forEach((e=>{const a={value:JSON.stringify(e.displayName),position:parseInt(e.index)};e.roles.hasOwnProperty("account")?t.TITLE_COLUMNS.VALUES[0].account=a:e.roles.hasOwnProperty("categories")?t.TITLE_COLUMNS.VALUES[0].categories=a:e.roles.hasOwnProperty("group_account_name")?t.TITLE_COLUMNS.VALUES[0].group_account_name=a:e.roles.hasOwnProperty("account_name")?t.TITLE_COLUMNS.VALUES[0].account_name=a:e.roles.hasOwnProperty("PreviousYear")?t.TITLE_COLUMNS.VALUES[0].PreviousYear=a:e.roles.hasOwnProperty("Budget")?t.TITLE_COLUMNS.VALUES[0].Budget=a:e.roles.hasOwnProperty("CurrentYear")?t.TITLE_COLUMNS.VALUES[0].CurrentYear=a:e.roles.hasOwnProperty("difDollar")?t.TITLE_COLUMNS.VALUES[0].difDollar=a:e.roles.hasOwnProperty("difPercentage")?t.TITLE_COLUMNS.VALUES[0].difPercentage=a:e.roles.hasOwnProperty("current_date")&&(t.TITLE_COLUMNS.VALUES[0].current_date=a)})),e.rows.forEach((e=>{let a="";if(null!==e[t.TITLE_COLUMNS.VALUES[0].categories.position]){a=e[t.TITLE_COLUMNS.VALUES[0].account.position];const r=o.getRowValuesJson(e,t.TITLE_COLUMNS.VALUES[0]);"FINANCIAL/DEPRECIATION"===r.categories&&(r.account_name.toUpperCase().includes("Amortizations".toUpperCase())||r.account_name.toUpperCase().includes("Depreciation".toUpperCase())||r.account_name.toUpperCase().includes("Interest Payment".toUpperCase()))&&(o.GrandTotal.ITDA_VALUE.categories.value="EBITDA (US$)",o.GrandTotal.ITDA_VALUE.PreviousYear.value=Number(o.GrandTotal.ITDA_VALUE.PreviousYear.value)+Number(r.PreviousYear),o.GrandTotal.ITDA_VALUE.Budget.value=Number(o.GrandTotal.ITDA_VALUE.Budget.value)+Number(r.Budget),o.GrandTotal.ITDA_VALUE.CurrentYear.value=Number(o.GrandTotal.ITDA_VALUE.CurrentYear.value)+Number(r.CurrentYear),o.GrandTotal.ITDA_VALUE.difDollar.value=Number(o.GrandTotal.ITDA_VALUE.difDollar.value)+Number(r.difDollar),o.GrandTotal.ITDA_VALUE.difPercentage.value=Number(o.GrandTotal.ITDA_VALUE.difPercentage.value)+Number(r.difPercentage)),"OPERATING INCOME"==a?t.INCOME.VALUES.push(r):"OPERATING EXPENSES"==a?t.EXPENSES.VALUES.push(r):"NON-OPERATING REVENUES"==a&&t.REVENUES.VALUES.push(r)}""==t.CURRENT_YTD&&(t.CURRENT_YTD=o.returnFormatYTD(e[t.TITLE_COLUMNS.VALUES[0].current_date.position],"current"),t.LAST_YTD=o.returnFormatYTD(e[t.TITLE_COLUMNS.VALUES[0].current_date.position],"last"),t.TITLE_COLUMNS.VALUES[0].account.value=o.ReplaceYTD(t.TITLE_COLUMNS.VALUES[0].account.value,t.LAST_YTD,t.CURRENT_YTD),t.TITLE_COLUMNS.VALUES[0].PreviousYear.value=o.ReplaceYTD(t.TITLE_COLUMNS.VALUES[0].PreviousYear.value,t.LAST_YTD,t.CURRENT_YTD),t.TITLE_COLUMNS.VALUES[0].Budget.value=o.ReplaceYTD(t.TITLE_COLUMNS.VALUES[0].Budget.value,t.LAST_YTD,t.CURRENT_YTD),t.TITLE_COLUMNS.VALUES[0].CurrentYear.value=o.ReplaceYTD(t.TITLE_COLUMNS.VALUES[0].CurrentYear.value,t.LAST_YTD,t.CURRENT_YTD),t.TITLE_COLUMNS.VALUES[0].difDollar.value=o.ReplaceYTD(t.TITLE_COLUMNS.VALUES[0].difDollar.value,t.LAST_YTD,t.CURRENT_YTD),t.TITLE_COLUMNS.VALUES[0].difPercentage.value=o.ReplaceYTD(t.TITLE_COLUMNS.VALUES[0].difPercentage.value,t.LAST_YTD,t.CURRENT_YTD))})),t}static isNumeric(e){return null!=e&&""!==e&&!isNaN(Number(e.toString()))}static returnFormatYTD(e,t="current"){const a="current"==t?2e3:2001;return(new Date(e).toLocaleString("default",{month:"short"})+"-"+(parseInt(new Date(e).toLocaleString("default",{year:"numeric"}))-a)).replace(/^\w/,(e=>e.toUpperCase()))}static returnStyleOutput(e,t=null,a=!0){return e=o.isNumeric(e)?o.PrintFormatNumeric(e,!1,!1,a):e,null===t?"<span>"+e+"</span>":"$"==t||"U$"==t||"US$"==t||"C$"==t?"<span><i>"+t+"</i>"+(e+""=="-0"?"-":e)+"</span>":"%"==t?"<span>"+e.replace("(","-").replace(")","")+"%</span>":void 0}static capitalizar(e){return e.replace(/\w\S*/g,(function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()}))}static ReturnRowWithData(e,t=null){const a=document.createElement("tr");"is_row_category"===t?(null!=t&&(a.className=t+" "+o._id_event_click_global_,a.setAttribute("data-category",o.doDashes(e.categories))),a.appendChild(o.ReturnCell("td",o.returnStyleOutput(e.categories),"is_string"))):"is_row_group_acount"===t?(null!=t&&(a.className=t+" "+o._id_event_click_global_,a.setAttribute("data-group-acount",o.doDashes(e.group_account_name))),a.appendChild(o.ReturnCell("td",o.returnStyleOutput(e.group_account_name),"is_string"))):(a.className=t+" hidden "+o.doDashes(e.categories),a.appendChild(o.ReturnCell("td",o.returnStyleOutput(e.account_name),"is_string "))),a.appendChild(o.ReturnCell("td",o.returnStyleOutput(e.PreviousYear,"$"),"is_numeric")),a.appendChild(o.ReturnCell("td",o.returnStyleOutput(e.Budget,"$"),"is_numeric")),a.appendChild(o.ReturnCell("td",o.returnStyleOutput(e.CurrentYear,"$"),"is_numeric")),a.appendChild(o.ReturnCell("td",o.returnStyleOutput(e.difDollar,"$"),"is_numeric"));const r=o.returnStyleOutput(Number(e.Budget)>0?Number(e.difDollar)/Number(e.Budget)*100:"-","%",!1);return a.appendChild(o.ReturnCell("td","<span>-%</span>"==r?"<span></span>":r,"is_numeric")),a}static doDashes(e){return(e=e.replace(/[^a-z0-9]+/gi,"-")).replace(/^-*|-*$/g,"").toLowerCase()}static getRandomArbitrary(e,t){return(Math.random()*(t-e)+e).toFixed(0)}static returnTotalLabel(e){let t="";switch(e){case"PROFIT":t="PROFIT";break;case"NETRESULTOPERATION":t="NETRESULTOPERATION";break;case"EBITDA_VALUE":t="EBITDA_VALUE";break;case"EBITDA_PERCENTAGE":t="EBITDA_PERCENTAGE";break;default:t=e}return t}static ReturnRow(e,t,a){const r=document.createElement("tr");return r.appendChild(o.ReturnCell("th",o.returnStyleOutput(e,"is_string_full"))),r.appendChild(o.ReturnCell("td",o.returnStyleOutput(t.PreviousYear.toFixed(0),a),"is_numeric")),r.appendChild(o.ReturnCell("td",o.returnStyleOutput(t.Budget.toFixed(0),a),"is_numeric")),r.appendChild(o.ReturnCell("td",o.returnStyleOutput(t.CurrentYear.toFixed(0),a),"is_numeric")),r.appendChild(o.ReturnCell("td",o.returnStyleOutput(t.difDollar.toFixed(0),a),"is_numeric")),r.appendChild(o.ReturnCell("td",o.returnStyleOutput(t.difPercentage.toFixed(1),"%",!1),"is_numeric")),r}static returnJsonEBITDA_VALUE(){const e=Number(o.GrandTotal.INCOME.PreviousYear.value),t=Number(o.GrandTotal.EBITDA_VALUE.PreviousYear.value),a=Number(o.GrandTotal.INCOME.Budget.value),r=Number(o.GrandTotal.EBITDA_VALUE.Budget.value),l=Number(o.GrandTotal.INCOME.CurrentYear.value),n=Number(o.GrandTotal.EBITDA_VALUE.CurrentYear.value),u=100*(0==l?0:n/l),i=100*(0==a?0:r/a),s=u-i;return{PreviousYear:t/e*100,Budget:i,CurrentYear:u,difDollar:s,difPercentage:0==i?0:s/i}}static ClearDataValues(e=null){o.GrandTotal[e].categories.value="",o.GrandTotal[e].PreviousYear.value=0,o.GrandTotal[e].Budget.value=0,o.GrandTotal[e].CurrentYear.value=0,o.GrandTotal[e].difDollar.value=0,o.GrandTotal[e].difPercentage.value=0}static SetDataValue(e=null,t=null){o.GrandTotal[e].categories.value=t.categories,o.GrandTotal[e].PreviousYear.value=t.PreviousYear,o.GrandTotal[e].Budget.value=t.Budget,o.GrandTotal[e].CurrentYear.value=t.CurrentYear,o.GrandTotal[e].difDollar.value=t.difDollar,o.GrandTotal[e].difPercentage.value=t.difPercentage}static UpdateDataValues(e=null,t=null){null!==e&&null!==t&&("INCOME"===e?(t.categories="OPERATING INCOME",o.SetDataValue("INCOME",t)):"EXPENSES"===e?(t.categories="OPERATING EXPENSES",o.SetDataValue("EXPENSES",t),o.GrandTotal.PROFIT.categories.value="PROFIT OPERATION",o.GrandTotal.PROFIT.PreviousYear.value=o.GrandTotal.INCOME.PreviousYear.value-o.GrandTotal.EXPENSES.PreviousYear.value,o.GrandTotal.PROFIT.Budget.value=o.GrandTotal.INCOME.Budget.value-o.GrandTotal.EXPENSES.Budget.value,o.GrandTotal.PROFIT.CurrentYear.value=o.GrandTotal.INCOME.CurrentYear.value-o.GrandTotal.EXPENSES.CurrentYear.value,o.GrandTotal.PROFIT.difDollar.value=o.GrandTotal.INCOME.difDollar.value-o.GrandTotal.EXPENSES.difDollar.value,o.GrandTotal.PROFIT.difPercentage.value=o.GrandTotal.INCOME.difPercentage.value-o.GrandTotal.EXPENSES.difPercentage.value):"REVENUES"===e&&(t.categories="NON-OPERATING REVENUES",o.SetDataValue("REVENUES",t),o.GrandTotal.NETRESULTOPERATION.categories.value="NET RESULT OPERATION",o.GrandTotal.NETRESULTOPERATION.PreviousYear.value=o.GrandTotal.PROFIT.PreviousYear.value+o.GrandTotal.REVENUES.PreviousYear.value,o.GrandTotal.NETRESULTOPERATION.Budget.value=o.GrandTotal.PROFIT.Budget.value+o.GrandTotal.REVENUES.Budget.value,o.GrandTotal.NETRESULTOPERATION.CurrentYear.value=o.GrandTotal.PROFIT.CurrentYear.value+o.GrandTotal.REVENUES.CurrentYear.value,o.GrandTotal.NETRESULTOPERATION.difDollar.value=o.GrandTotal.PROFIT.difDollar.value+o.GrandTotal.REVENUES.difDollar.value,o.GrandTotal.NETRESULTOPERATION.difPercentage.value=o.GrandTotal.PROFIT.difPercentage.value+o.GrandTotal.REVENUES.difPercentage.value))}static ReturnGroupedRow(e=null,t=null){return null===e?{account:"",categories:"",group_account_name:"",PreviousYear:0,Budget:0,CurrentYear:0,difDollar:0,difPercentage:0}:null===t?{account:e.account,categories:e.categories,group_account_name:e.group_account_name,PreviousYear:e.PreviousYear,Budget:e.Budget,CurrentYear:e.CurrentYear,difDollar:e.difDollar,difPercentage:e.difPercentage}:{account:e.account,categories:e.categories,group_account_name:e.group_account_name,PreviousYear:e.PreviousYear+t.PreviousYear,Budget:e.Budget+t.Budget,CurrentYear:e.CurrentYear+t.CurrentYear,difDollar:e.difDollar+t.difDollar,difPercentage:e.difPercentage+t.difPercentage}}static GenerateAccountTypeTable(e=null,t=null,a=null){let r=document.createElement("table"),l=document.createElement("thead"),n=document.createElement("tfoot"),u=document.createElement("tbody"),i=document.createElement("tr");if(r.className="tbl_style separator-bottom "+e,i.className="is_row_title_type_account","PROFIT"==e||"NETRESULTOPERATION"==e||"EBITDA_VALUE"==e||"EBITDA_PERCENTAGE"==e){let t=o.returnTotalLabel(e),a=((o.GrandTotal[t].CurrentYear.value-o.GrandTotal[t].Budget.value)/o.GrandTotal[t].Budget.value*100).toFixed(1);if("EBITDA_PERCENTAGE"===e){let e=o.returnJsonEBITDA_VALUE();i.appendChild(o.ReturnCell("th",o.returnStyleOutput(o.GrandTotal[t].categories.value),"is_string_full")),i.appendChild(o.ReturnCell("td",o.returnStyleOutput(e.PreviousYear.toFixed(0),"%"),"is_numeric")),i.appendChild(o.ReturnCell("td",o.returnStyleOutput(e.Budget.toFixed(0),"%"),"is_numeric")),i.appendChild(o.ReturnCell("td",o.returnStyleOutput(e.CurrentYear.toFixed(0),"%"),"is_numeric")),i.appendChild(o.ReturnCell("td",o.returnStyleOutput(""),"is_string_full")),i.appendChild(o.ReturnCell("td",o.returnStyleOutput(""),"is_string_full"))}else i.appendChild(o.ReturnCell("th",o.returnStyleOutput(o.GrandTotal[t].categories.value),"is_string_full")),i.appendChild(o.ReturnCell("td",o.returnStyleOutput(o.GrandTotal[t].PreviousYear.value,"$"),"is_numeric")),i.appendChild(o.ReturnCell("td",o.returnStyleOutput(o.GrandTotal[t].Budget.value,"$"),"is_numeric")),i.appendChild(o.ReturnCell("td",o.returnStyleOutput(o.GrandTotal[t].CurrentYear.value,"$"),"is_numeric")),i.appendChild(o.ReturnCell("td",o.returnStyleOutput(o.GrandTotal[t].difDollar.value,"$"),"is_numeric")),i.appendChild(o.ReturnCell("td",o.returnStyleOutput(a,"%"),"is_numeric"));l.appendChild(i),r.append(l)}else{let s=o.ReturnGroupedRow(),d="",c=o.ReturnGroupedRow();if(null!=a){r.className="tbl_style","HEADERS"===e&&(i.className="headers");for(let t in a)if("HEADERS"===e&&"account_name"!=t&&"categories"!=t&&"current_date"!=t){const e=a[t].replace('"',"").replace('"',"");i.appendChild(o.ReturnCell("th",e))}l.appendChild(i),r.append(l)}else{if(r.className="tbl_style separator-bottom",null!=o.settings_obj[e].Label){let t=document.createElement("tr");t.className="is_row_title_type_account",t.appendChild(o.ReturnCell("th",o.returnStyleOutput(o.settings_obj[e].Label),"is_string_full",6)),l.appendChild(t)}if(t){let a=o.ReturnGroupedRow(),r=document.createElement("div"),l="",n="",i="";t.forEach((t=>{""==l&&(l=t.group_account_name,n=" begin_group_"+o.doDashes(t.group_account_name)+" ",i=" class_parent_"+o.doDashes(t.group_account_name)+" "),l!==t.group_account_name?(n=" begin_group_"+o.doDashes(t.group_account_name)+" ",i=" class_parent_"+o.doDashes(t.group_account_name)+" ",l=t.group_account_name,a=o.ReturnGroupedRow(t)):a=o.ReturnGroupedRow(a,t),d!=t.categories&&(""!=d&&(u.appendChild(o.ReturnRowWithData(c,"is_row_category")),u.innerHTML+=r.innerHTML,r.innerHTML=null,s.categories=o.settings_obj[e].LabelTotal,s=o.ReturnGroupedRow(s,c),c=o.ReturnGroupedRow()),r=document.createElement("div")),c.categories=t.categories,c=o.ReturnGroupedRow(c,t),r.appendChild(o.ReturnRowWithData(t,"is_row_title "+n+" "+i)),d=t.categories,n=""})),s.categories=o.settings_obj[e].LabelTotal,s=o.ReturnGroupedRow(s,c),u.appendChild(o.ReturnRowWithData(c,"is_row_category")),u.innerHTML+=r.innerHTML,r.innerHTML=null}if(null!=o.settings_obj[e].Label){let t=document.createElement("tr");t.className="is_row_title_type_account";let a=((s.CurrentYear-s.Budget)/s.Budget*100).toFixed(1);t.appendChild(o.ReturnCell("th",o.returnStyleOutput(o.settings_obj[e].LabelTotal),"is_string_full")),t.appendChild(o.ReturnCell("td",o.returnStyleOutput(s.PreviousYear,"$"),"is_numeric")),t.appendChild(o.ReturnCell("td",o.returnStyleOutput(s.Budget,"$"),"is_numeric")),t.appendChild(o.ReturnCell("td",o.returnStyleOutput(s.CurrentYear,"$"),"is_numeric")),t.appendChild(o.ReturnCell("td",o.returnStyleOutput(s.difDollar,"$"),"is_numeric")),t.appendChild(o.ReturnCell("td",o.returnStyleOutput(a,"%",!1),"is_numeric")),n.appendChild(t),o.UpdateDataValues(e,s)}""!==$.trim(l.innerHTML)&&r.append(l),""!==$.trim(u.innerHTML)&&r.append(u),""!==$.trim(n.innerHTML)&&r.append(n)}}return r}static GetDataValues(e){return{account:e.account.value,categories:e.categories.value,account_name:e.account_name.value,PreviousYear:e.PreviousYear.value,Budget:e.Budget.value,CurrentYear:e.CurrentYear.value,difDollar:e.difDollar.value,difPercentage:e.difPercentage.value}}InitDataTable(){const e=document.getElementById("TblContainerER");e.innerHTML="";let t=this.dataView.table,a=this.returnDB_Json(t),r=new Date("10/02/2019");const l=new Date;o._id_event_click_global_="event_click_"+Math.abs(r-l)+o.getRandomArbitrary(100,999),e.appendChild(o.GenerateAccountTypeTable("HEADERS",null,o.GetDataValues(a.TITLE_COLUMNS.VALUES[0]))),e.appendChild(o.GenerateAccountTypeTable("INCOME",a.INCOME.VALUES)),e.appendChild(o.GenerateAccountTypeTable("EXPENSES",a.EXPENSES.VALUES)),e.appendChild(o.GenerateAccountTypeTable("PROFIT",a.PROFIT.VALUES)),e.appendChild(o.GenerateAccountTypeTable("REVENUES",a.REVENUES.VALUES)),e.appendChild(o.GenerateAccountTypeTable("NETRESULTOPERATION")),o.GrandTotal.EBITDA_VALUE.categories.value="EBITDA (US$)",o.GrandTotal.EBITDA_VALUE.PreviousYear.value=Number(o.GrandTotal.NETRESULTOPERATION.PreviousYear.value)+Number(o.GrandTotal.ITDA_VALUE.PreviousYear.value),o.GrandTotal.EBITDA_VALUE.Budget.value=Number(o.GrandTotal.NETRESULTOPERATION.Budget.value)+Number(o.GrandTotal.ITDA_VALUE.Budget.value),o.GrandTotal.EBITDA_VALUE.CurrentYear.value=Number(o.GrandTotal.NETRESULTOPERATION.CurrentYear.value)+Number(o.GrandTotal.ITDA_VALUE.CurrentYear.value),o.GrandTotal.EBITDA_VALUE.difDollar.value=Number(o.GrandTotal.NETRESULTOPERATION.difDollar.value)+Number(o.GrandTotal.ITDA_VALUE.difDollar.value),o.GrandTotal.EBITDA_VALUE.difPercentage.value=Number(o.GrandTotal.NETRESULTOPERATION.difPercentage.value)+Number(o.GrandTotal.ITDA_VALUE.difPercentage.value),e.appendChild(o.GenerateAccountTypeTable("EBITDA_VALUE")),o.GrandTotal.EBITDA_PERCENTAGE.categories.value="EBITDA (%)",o.GrandTotal.EBITDA_PERCENTAGE.PreviousYear.value=parseFloat(o.GrandTotal.EBITDA_VALUE.PreviousYear.value+"")/parseFloat(o.GrandTotal.INCOME.PreviousYear.value+""),o.GrandTotal.EBITDA_PERCENTAGE.CurrentYear.value=o.GrandTotal.EBITDA_VALUE.CurrentYear.value/o.GrandTotal.INCOME.CurrentYear.value,o.GrandTotal.EBITDA_PERCENTAGE.difDollar.value=0,o.GrandTotal.EBITDA_PERCENTAGE.difPercentage.value=0,e.appendChild(o.GenerateAccountTypeTable("EBITDA_PERCENTAGE")),o.ClearDataValues("INCOME"),o.ClearDataValues("EXPENSES"),o.ClearDataValues("PROFIT"),o.ClearDataValues("REVENUES"),o.ClearDataValues("NETRESULTOPERATION"),o.ClearDataValues("ITDA_VALUE"),o.ClearDataValues("EBITDA_VALUE"),o.ClearDataValues("EBITDA_PERCENTAGE"),o.target.appendChild(e)}update(e){if(this.formattingSettings=this.formattingSettingsService.populateFormattingSettingsModel(n.S,e.dataViews),o.target){o.settings_obj=(new n.C).getSettings(this.formattingSettings),this.dataView=e.dataViews[0],this.InitDataTable();let t=$(".TblContainerER").parent();t.css("background",o.settings_obj.BackGroundColor),t.find(".tbl_style tr.headers, .EBITDA_VALUE tr, .EBITDA_PERCENTAGE tr").css("background-color",o.settings_obj.BackGroundColorHeaders),t.find(".tbl_style tr.headers, .EBITDA_VALUE tr, .EBITDA_PERCENTAGE tr").css("color",o.settings_obj.BackGroundColorHeadersColor),t.find(".tbl_style tr.headers th").css("border-color",o.settings_obj.BackGroundColor),t.find(".tbl_style:not(.EBITDA_VALUE, .EBITDA_PERCENTAGE) .is_row_title_type_account").css("background",o.settings_obj.BackGroundColorAccount),$("body").on("click","."+o._id_event_click_global_,(function(){let e=$(this),t=$.trim(e.data("category"));e.hasClass("_show_")?($("tr."+t).addClass("hidden"),e.removeClass("_show_")):($("tr."+t).removeClass("hidden"),e.addClass("_show_"))}))}}static agregarEventoClick(){console.log("EVENT CLICK CREATED");var e=document.getElementById("show_hidden");e&&e.addEventListener("click",(function(e){console.log("EVENT CLICK");let t=document.getElementById("logbox");t.classList.contains("open")?t.classList.remove("open"):t.classList.add("open")}))}static PrintFormatNumeric(e,t=!1,a=!1,r=!0){let l=e,n=Number(o.settings_obj.ValueDecimalPlaces);if(null==l||!isFinite(l))throw new TypeError("number is not valid");if(!n){let e=l.toString().split(".").length;n=e>1?e:0}t||(t="."),a||(a=","),l=r?parseFloat(l).toFixed(0):parseFloat(l).toFixed(1),l=l.replace(".",t);let u=l.split(t);u[0]=u[0].replace(/\B(?=(\d{3})+(?!\d))/g,a),l=u.join(t);let i=(parseFloat(l)<0?"("+l.replace("-","")+")":l).replace("(0)","-");return"0"===i?"-":i}static formatMoney(e,t=2,a=".",r=","){try{t=Math.abs(t),t=isNaN(t)?2:t;const l=e<0?"-":"",n=parseInt(e=Math.abs(Number(e)||0).toFixed(t)).toString(),o=n.length>3?n.length%3:0;return l+(o?n.substr(0,o)+r:"")+n.substr(o).replace(/(\d{3})(?=\d)/g,"$1"+r)+(t?a+Math.abs(e-n).toFixed(t).slice(2):"")}catch(e){return"error"}}getFormattingModel(){return this.formattingSettingsService.buildFormattingModel(this.formattingSettings)}}},754:(e,t,a)=>{a.d(t,{Kx:()=>n,Zp:()=>o,iB:()=>s,ks:()=>d,sk:()=>i});var r=a(639);class l{}class n{}class o extends l{getFormattingCard(e,t,a){return{displayName:a&&this.displayNameKey?a.getDisplayName(this.displayNameKey):this.displayName,description:a&&this.descriptionKey?a.getDisplayName(this.descriptionKey):this.description,groups:[t],uid:e,analyticsPane:this.analyticsPane}}}class u extends l{constructor(e){super(),Object.assign(this,e)}getFormattingSlice(e,t){const a=this.type,r=this.name,l={displayName:t&&this.displayNameKey?t.getDisplayName(this.displayNameKey):this.displayName,description:t&&this.descriptionKey?t.getDisplayName(this.descriptionKey):this.description,uid:e+"-"+r};return Object.assign(Object.assign({},l),{control:{type:a,properties:this.getFormattingComponent(e,t)}})}getFormattingComponent(e,t){return{descriptor:r.y(e,this),value:this.value}}getRevertToDefaultDescriptor(e){return[{objectName:e,propertyName:this.name}]}setPropertiesValues(e,t){var a;let l=null===(a=null==e?void 0:e[t])||void 0===a?void 0:a[this.name];this.value=r.D(this,l,this.value)}}class i extends u{constructor(e){super(e),this.type="ColorPicker"}getFormattingComponent(e){return Object.assign(Object.assign({},super.getFormattingComponent(e)),{defaultColor:this.defaultColor,isNoFillItemSupported:this.isNoFillItemSupported})}}class s extends u{constructor(e){super(e),this.type="NumUpDown"}getFormattingComponent(e){return Object.assign(Object.assign({},super.getFormattingComponent(e)),{options:this.options})}}class d extends u{constructor(e){super(e),this.type="TextInput"}getFormattingComponent(e){return Object.assign(Object.assign({},super.getFormattingComponent(e)),{placeholder:this.placeholder})}}},667:(e,t,a)=>{a.d(t,{A:()=>r});const r=class{constructor(e){this.localizationManager=e}populateFormattingSettingsModel(e,t){var a,r,l;let n=new e,o=null===(r=null===(a=null==t?void 0:t[0])||void 0===a?void 0:a.metadata)||void 0===r?void 0:r.objects;return o&&(null===(l=n.cards)||void 0===l||l.forEach((e=>{var t,a,r;null===(t=null==e?void 0:e.slices)||void 0===t||t.forEach((t=>{null==t||t.setPropertiesValues(o,e.name)})),null===(r=null===(a=null==e?void 0:e.container)||void 0===a?void 0:a.containerItems)||void 0===r||r.forEach((t=>{var a;null===(a=null==t?void 0:t.slices)||void 0===a||a.forEach((t=>{null==t||t.setPropertiesValues(o,e.name)}))}))}))),n}buildFormattingModel(e){var t;let a={cards:[]};return null===(t=e.cards)||void 0===t||t.forEach((e=>{if(!e)return;const t=e.name,r=e.name+"-group";let l={displayName:void 0,slices:[],uid:r},n=e.getFormattingCard(t,l,this.localizationManager);a.cards.push(n);const o={};if(e.container){const a=e.container,u=r+"-container",i={displayName:this.localizationManager&&a.displayNameKey?this.localizationManager.getDisplayName(a.displayNameKey):a.displayName,description:this.localizationManager&&a.descriptionKey?this.localizationManager.getDisplayName(a.descriptionKey):a.description,containerItems:[],uid:u};a.containerItems.forEach((e=>{const a=e.displayNameKey?e.displayNameKey:e.displayName,r=u+a;let l={displayName:this.localizationManager&&e.displayNameKey?this.localizationManager.getDisplayName(e.displayNameKey):e.displayName,slices:[],uid:r};this.buildFormattingSlices(e.slices,t,o,n,l.slices),i.containerItems.push(l)})),l.container=i}e.slices&&this.buildFormattingSlices(e.slices,t,o,n,l.slices),n.revertToDefaultDescriptors=this.getRevertToDefaultDescriptor(e)})),a}buildFormattingSlices(e,t,a,r,l){null==e||e.forEach((e=>{let n=null==e?void 0:e.getFormattingSlice(t,this.localizationManager);n&&(void 0===a[e.name]?a[e.name]=0:(a[e.name]++,n.uid=`${n.uid}-${a[e.name]}`),e.topLevelToggle?(n.suppressDisplayName=!0,r.topLevelToggle=n):l.push(n))}))}getRevertToDefaultDescriptor(e){var t,a;const r={};let l=[],n=this.getSlicesRevertToDefaultDescriptor(e.name,e.slices,r),o=[];return null===(a=null===(t=e.container)||void 0===t?void 0:t.containerItems)||void 0===a||a.forEach((t=>{o=o.concat(this.getSlicesRevertToDefaultDescriptor(e.name,t.slices,r))})),l=n.concat(o),l}getSlicesRevertToDefaultDescriptor(e,t,a){let r=[];return null==t||t.forEach((t=>{t&&!a[t.name]&&(a[t.name]=!0,r=r.concat(t.getRevertToDefaultDescriptor(e)))})),r}}},674:(e,t,a)=>{a.d(t,{O:()=>l.A,z:()=>r});var r=a(754),l=a(667)},639:(e,t,a)=>{function r(e,t){return{objectName:e,propertyName:t.name,selector:t.selector,altConstantValueSelector:t.altConstantSelector,instanceKind:t.instanceKind}}function l(e,t,a){return null==t||"object"==typeof t&&!t.solid?a:t.solid?{value:null==t?void 0:t.solid.color}:(null==e?void 0:e.items)?e.items.find((e=>e.value==t)):t}a.d(t,{D:()=>l,y:()=>r})}},t={};function a(r){var l=t[r];if(void 0!==l)return l.exports;var n=t[r]={exports:{}};return e[r](n,n.exports,a),n.exports}a.d=(e,t)=>{for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};(()=>{a.r(r),a.d(r,{default:()=>n});var e=a(283),t=window.powerbi,l={name:"tableDataAndGraph",displayName:"table data and graph",class:"Visual",apiVersion:"5.4.0",create:t=>{if(e.b)return new e.b(t);throw"Visual instance not found"},createModalDialog:(e,t,a)=>{const r=globalThis.dialogRegistry;e in r&&new r[e](t,a)},custom:!0};void 0!==t&&(t.visuals=t.visuals||{},t.visuals.plugins=t.visuals.plugins||{},t.visuals.plugins.tableDataAndGraph=l);const n=l})(),tableDataAndGraph=r})();